<?php
include 'config.php'; // Inkludera konfigurationsfilen
?>
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>
        <?php echo $name; ?> - Bildgalleri
    </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Personlig Blogg Template" name="keywords">
    <meta content="En ren och responsiv personlig blogg template." name="description">

    <!-- Favicon -->
    <link href="img/favicon.ico" rel="icon">

    <!-- Font Awesome (lokalt installerat) -->
    <link rel="stylesheet" href="fonts/fontawesome-free-6.7.2-web/css/all.min.css">

    <!-- Font Open Sans (lokalt definierat) -->
    <link href="css/opensans.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/style.css" rel="stylesheet">

    <!-- Content Security Policy (CSP) -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' https://code.jquery.com https://stackpath.bootstrapcdn.com;
        style-src  'self' https://fonts.googleapis.com 'unsafe-inline';
        img-src 'self' data:;
        font-src 'self';
        connect-src 'self';
        object-src 'none';
        base-uri 'self';
        form-action 'self';
        frame-ancestors 'none';
    ">

    <style>
        .gallery-item {
            margin-bottom: 20px;
        }

        .gallery-item img {
            width: 100%;
            height: auto;
            border-radius: 5px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease-in-out;
        }

        .gallery-item img:hover {
            transform: scale(1.05);
        }
    </style>
</head>

<body>
    <div class="wrapper">
        <!-- Sidebar Start -->
        <?php include 'sidebar.php'; ?>
        <!-- Sidebar End -->

        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <div class="container p-0">
                <nav class="navbar navbar-expand-lg bg-secondary navbar-dark">
                    <a href="index.php" class="navbar-brand d-block d-lg-none">Navigering</a>
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                        <div class="navbar-nav m-auto">
                            <a href="index.php" class="nav-item nav-link">Hem</a>
                            <a href="about.php" class="nav-item nav-link">Om</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" data-toggle="dropdown">Sidor</a>
                                <div class="dropdown-menu">
                                    <a href="blog.php" class="dropdown-item">Blogg</a>
                                    <a href="bilder.php" class="dropdown-item">Bilder</a>
                                </div>
                            </div>
                            <a href="contact.php" class="nav-item nav-link">Kontakt</a>
                        </div>
                    </div>
                </nav>
            </div>
            <!-- Navbar End -->

            <!-- Page Header Start -->
            <div class="container py-5 px-2 bg-primary">
                <div class="row py-5 px-4">
                    <div class="col-sm-6 text-center text-md-left">
                        <h1 class="mb-3 mb-md-0 text-white text-uppercase font-weight-bold">Bildgalleri</h1>
                    </div>
                    <div class="col-sm-6 text-center text-md-right">
                        <div class="d-inline-flex pt-2">
                            <h4 class="m-0 text-white"><a class="text-white" href="index.php">Hem</a></h4>
                            <h4 class="m-0 text-white px-2">/</h4>
                            <h4 class="m-0 text-white">Bildgalleri</h4>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Page Header End -->

            <!-- Gallery Start -->
            <?php
            $imageDir = "img/gallery"; // Katalogen där bilderna finns
            $allowedExtensions = array("jpg", "jpeg", "png", "gif"); // Tillåtna filtyper

            $files = scandir($imageDir);
            $images = array();

            foreach ($files as $file) {
                $fileInfo = pathinfo($file);
                if (isset($fileInfo['extension']) && in_array(strtolower($fileInfo['extension']), $allowedExtensions)) {
                    $images[] = $imageDir . "/" . $file;
                }
            }
            ?>

            <div class="container bg-white py-5 px-2">
                <div class="row">
                    <?php foreach ($images as $image): ?>
                        <div class="col-lg-4 col-md-6 gallery-item">
                            <img src="<?php echo $image; ?>" alt="Gallery Image">
                        </div>
                    <?php endforeach; ?>
                </div>
            </div>
            <!-- Gallery End -->

            <!-- Footer Start -->
            <div class="container py-4 bg-secondary text-center">
                <p class="m-0 text-white">
                    &copy; <a class="text-white font-weight-bold" href="#">Your Site Name</a>. All Rights Reserved. Designed
                    by <a class="text-white font-weight-bold" href="https://htmlcodex.com">HTML Codex</a>
                </p>
            </div>
            <!-- Footer End -->
        </div>
        <!-- Content End -->
    </div>
    <!-- Wrapper End -->

    <!-- Back to Top -->
    <a href="#" class="back-to-top"><i class="fa fa-angle-double-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>

    <!-- Contact Javascript File -->
    <script src="mail/jqBootstrapValidation.min.js"></script>
    <script src="mail/contact.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
</body>

</html>
